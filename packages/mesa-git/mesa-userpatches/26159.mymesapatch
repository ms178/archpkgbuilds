From e843fce65b97bf033fa9a5f374f37a7ad5ff7882 Mon Sep 17 00:00:00 2001
From: Vinson Lee <vlee@freedesktop.org>
Date: Sun, 12 Nov 2023 10:04:13 -0800
Subject: [PATCH] nir: Fix decomposed_prmcnt copy-paste error

Fix defect reported by Coverity Scan.

Copy-paste error (COPY_PASTE_ERROR)
copy_paste_error: prmcnt in prmcnt = -1 looks like a copy-paste error.

Fixes: cc3f20ca6c1 ("nir: Also gather decomposed primitive count")
Signed-off-by: Vinson Lee <vlee@freedesktop.org>
---
 src/compiler/nir/nir_gs_count_vertices.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/compiler/nir/nir_gs_count_vertices.c b/src/compiler/nir/nir_gs_count_vertices.c
index 23a3437c480c8..176b813b80a3f 100644
--- a/src/compiler/nir/nir_gs_count_vertices.c
+++ b/src/compiler/nir/nir_gs_count_vertices.c
@@ -105,7 +105,7 @@ nir_gs_count_vertices_and_primitives(const nir_shader *shader,
             if (cnt_found[stream] && prmcnt != prmcnt_arr[stream])
                prmcnt = -1;
             if (cnt_found[stream] && decomposed_prmcnt != decomposed_prmcnt_arr[stream])
-               prmcnt = -1;
+               decomposed_prmcnt = -1;
 
             vtxcnt_arr[stream] = vtxcnt;
             prmcnt_arr[stream] = prmcnt;
-- 
GitLab

