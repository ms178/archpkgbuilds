From 39b2d040e64aa13d0e1a11628340c7311f472667 Mon Sep 17 00:00:00 2001
From: Georg Lehmann <dadschoorse@gmail.com>
Date: Fri, 24 Mar 2023 13:41:11 +0100
Subject: [PATCH] aco: don't check usesModifiers for pseudo instructions

This can't happen.
---
 src/amd/compiler/aco_optimizer.cpp | 2 --
 1 file changed, 2 deletions(-)

diff --git a/src/amd/compiler/aco_optimizer.cpp b/src/amd/compiler/aco_optimizer.cpp
index cca6b37741a1..68f72ca7eb1a 100644
--- a/src/amd/compiler/aco_optimizer.cpp
+++ b/src/amd/compiler/aco_optimizer.cpp
@@ -1803,8 +1803,6 @@ label_instruction(opt_ctx& ctx, aco_ptr<Instruction>& instr)
    case aco_opcode::p_as_uniform:
       if (instr->definitions[0].isFixed()) {
          /* don't copy-propagate copies into fixed registers */
-      } else if (instr->usesModifiers()) {
-         // TODO
       } else if (instr->operands[0].isConstant()) {
          ctx.info[instr->definitions[0].tempId()].set_constant(
             ctx.program->gfx_level, instr->operands[0].constantValue64());
-- 
GitLab

