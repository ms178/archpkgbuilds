From dbb440a2afdded5561d5300be2ab0f7c35948000 Mon Sep 17 00:00:00 2001
From: Friedrich Vock <friedrich.vock@gmx.de>
Date: Thu, 4 Jan 2024 14:41:18 +0100
Subject: [PATCH] radv: Fix inverted shader replay allocation condition

This should be the other way around.

Cc: mesa-stable
---
 src/amd/vulkan/radv_shader.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/amd/vulkan/radv_shader.c b/src/amd/vulkan/radv_shader.c
index a24933f0db0e..80e6fab7835c 100644
--- a/src/amd/vulkan/radv_shader.c
+++ b/src/amd/vulkan/radv_shader.c
@@ -1349,7 +1349,7 @@ radv_replay_shader_arena_block(struct radv_device *device, const struct radv_ser
       uint32_t hole_end = hole->offset + hole->size;
 
       /* If another allocated block overlaps the current replay block, allocation is impossible */
-      if (block_begin > hole_begin || (hole_end < block_end && hole_end >= block_begin))
+      if (hole_begin > block_begin || (hole_end < block_end && hole_end >= block_begin))
          return NULL;
 
       union radv_shader_arena_block *block = insert_block(device, hole, block_begin - hole_begin, src->size, NULL);
-- 
GitLab

