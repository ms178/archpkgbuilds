From 91c5ec1ae0ac2a69f12264e75d29b70aeaa4dc96 Mon Sep 17 00:00:00 2001
From: Mike Blumenkrantz <michael.blumenkrantz@gmail.com>
Date: Wed, 17 Aug 2022 18:09:22 -0400
Subject: [PATCH] vulkan: initialize a variable
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

../src/vulkan/runtime/vk_fence.c: In function ‘vk_common_CreateFence’:
../src/vulkan/runtime/vk_fence.c:160:12: warning: ‘fence’ may be used uninitialized [-Wmaybe-uninitialized]
  160 |    *pFence = vk_fence_to_handle(fence);
      |    ~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~
../src/vulkan/runtime/vk_fence.c:154:21: note: ‘fence’ was declared here
  154 |    struct vk_fence *fence;
---
 src/vulkan/runtime/vk_fence.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/vulkan/runtime/vk_fence.c b/src/vulkan/runtime/vk_fence.c
index bcb2b11d840d..bf2bb76cb367 100644
--- a/src/vulkan/runtime/vk_fence.c
+++ b/src/vulkan/runtime/vk_fence.c
@@ -151,7 +151,7 @@ vk_common_CreateFence(VkDevice _device,
                       VkFence *pFence)
 {
    VK_FROM_HANDLE(vk_device, device, _device);
-   struct vk_fence *fence;
+   struct vk_fence *fence = NULL;
 
    VkResult result = vk_fence_create(device, pCreateInfo, pAllocator, &fence);
    if (result != VK_SUCCESS)
-- 
GitLab

